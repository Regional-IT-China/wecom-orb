description: |
  Notify a Wecom group with a custom message.

parameters:
  to:
    type: string
    default: "World"
    description: "Hello to whom?"
  step_name:
    type: string
    default: Wecom - Sending Notification
    description: Specify a custom step name for this command, if desired
steps:
  - run:
      when: on_fail
      name: Wecom - Detecting Job Status (FAIL)
      command: |
        echo 'export CCI_STATUS="fail"'
  - run:
      when: on_success
      name: Wecom - Detecting Job Status (PASS)
      command: |
        echo 'export CCI_STATUS="pass"'
  - run:
      when: always
      name: << parameters.step_name >>
      environment:
      command: echo 'export CCI_STATUS="always"'
